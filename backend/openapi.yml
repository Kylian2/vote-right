openapi: 3.0.1
x-stoplight:
  id: q80121ewju7co
info:
  title: API VoteRight
  version: 1.0.0
  description: |-
    La liste des endpoints utilisés par l'application VoteRight.

    *Attention, le rôle premier cette documentation n'est pas de tester les endpoits mais de fournir des exemples d'utilisation des différentes ressources de l'api.*
servers:
  - url: 'https://api.voteright.fr'
    description: Serveur de production
  - url: 'http://localhost:3333'
    description: Serveur local de développement
paths:
  /auth/register:
    post:
      summary: Créer un compte
      tags:
        - authentification
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-examples:
                  Example 1:
                    USR_id_NB: 104
                    USR_lastname_VC: Athan
                    USR_firstname_VC: John
                    USR_email_VC: johnathan@gmail.com
                    USR_password_VC: '$argon2id$v=19$m=65536,t=4,p=1$MVhlRVFOVXJ1QWhvMDNSWQ$0s4oYr327cjxPIon10lHlUEdX2LZpwE1BJs+TXDpwuo'
                    USR_address_VC: Rue du blé
                    USR_zipcode_CH: '78300'
                    USR_birthdate_DATE: '2005-10-10'
                    USR_notification_frequency_CH: H
                    USR_notify_proposal_BOOL: 0
                    USR_notify_vote_BOOL: 0
                    USR_notify_reaction_BOOL: 0
                    USR_newsletter_BOOL: 0
                properties:
                  USR_id_NB:
                    type: integer
                  USR_lastname_VC:
                    type: string
                  USR_firstname_VC:
                    type: string
                  USR_email_VC:
                    type: string
                  USR_password_VC:
                    type: string
                  USR_address_VC:
                    type: string
                  USR_zipcode_CH:
                    type: string
                  USR_birthdate_DATE:
                    type: string
                  USR_notification_frequency_CH:
                    type: string
                  USR_notify_proposal_BOOL:
                    type: integer
                  USR_notify_vote_BOOL:
                    type: integer
                  USR_notify_reaction_BOOL:
                    type: integer
                  USR_newsletter_BOOL:
                    type: integer
              examples:
                Example 1:
                  value:
                    USR_id_NB: 104
                    USR_lastname_VC: Athan
                    USR_firstname_VC: John
                    USR_email_VC: johnathan@gmail.com
                    USR_password_VC: '$argon2id$v=19$m=65536,t=4,p=1$MVhlRVFOVXJ1QWhvMDNSWQ$0s4oYr327cjxPIon10lHlUEdX2LZpwE1BJs+TXDpwuo'
                    USR_address_VC: Rue du blé
                    USR_zipcode_CH: '78300'
                    USR_birthdate_DATE: '2005-10-10'
                    USR_notification_frequency_CH: H
                    USR_notify_proposal_BOOL: 0
                    USR_notify_vote_BOOL: 0
                    USR_notify_reaction_BOOL: 0
                    USR_newsletter_BOOL: 0
        '400':
          description: 'Bad Request, le code fourni est incorrect'
      operationId: post-auth-register
      x-stoplight:
        id: 1b6npyrgcq80b
      description: 'Destiné à la création d''un compte sur l''application. '
      requestBody:
        content:
          application/json:
            schema:
              type: object
              x-examples:
                Example 1:
                  email: johnathan@gmail.com
                  password: unmotdepasse
                  lastname: Athan
                  firstname: John
                  address: Rue du blé
                  zipcode: '78300'
                  birthdate: '2005-10-10'
              properties:
                email:
                  type: string
                password:
                  type: string
                lastname:
                  type: string
                firstname:
                  type: string
                code:
                  type: number
                  x-stoplight:
                    id: tdxu2mn2wazku
            examples:
              Example 1:
                value:
                  email: johnathan@gmail.com
                  password: password
                  lastname: Athan
                  firstname: John
                  address: Rue du blé
                  zipcode: '78300'
                  birthdate: '2005-10-10'
                  code: 123456
  /auth/login:
    post:
      summary: S'authentifier
      tags:
        - authentification
      responses:
        '200':
          description: 'OK, renvoie `true`sur l''authentification à réussi, `faux`sinon.'
      operationId: post-auth-login
      x-stoplight:
        id: w454jqbrrnwef
      description: Si valide la requête authentifie l'utilisateur
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              x-examples:
                Example 1:
                  email: lshower2j@springer.com
                  password: monmotdepasse
            examples:
              Example 1:
                value:
                  email: johnathan@gmail.com
                  password: password
  /auth/check:
    get:
      summary: Vérifier la validité de la session
      tags:
        - authentification
      responses:
        '200':
          description: OK
      operationId: get-auth-check
      x-stoplight:
        id: 11aex930ha0l6
      description: 'Renvoie `true` si la session est valide, `false` sinon.'
  /communities:
    get:
      summary: Liste des communautés
      description: Récupère la liste des communautés auxquelles l'utilisateur participe.
      responses:
        '200':
          description: Les communautés renvoyées avec succès.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    CMY_id_NB:
                      type: string
                      description: Identifiant de la communauté
                      example: '13'
                    CMY_name_VC:
                      type: string
                      description: Nom de la communauté
                      example: Marché de Noël de Strasbourg
                    CMY_emoji_VC:
                      type: string
                      description: Emoji associé à la communauté
                      example: 1F389
                    CMY_color_VC:
                      type: string
                      description: Couleur associée à la communauté
                      example: '#DE3D59'
                    CMY_image_VC:
                      type: string
                      description: Nom de fichier de l'image de la communauté
                      example: 100010.png
                    CMY_nb_member_NB:
                      type: string
                      description: Nombre de membres dans la communauté
                      example: '82'
                    CMY_themes_TAB:
                      type: array
                      description: Liste des thèmes associés à la communauté
                      items:
                        type: string
                      example:
                        - Animation
                        - Bénévole
                        - Autorisation
                        - Musique
              examples:
                Example 1:
                  value:
                    - CMY_id_NB: '13'
                      CMY_name_VC: Marché de Noël de Strasbourg
                      CMY_emoji_VC: 1F389
                      CMY_color_VC: '#DE3D59'
                      CMY_image_VC: 100010.png
                      CMY_nb_member_NB: '82'
                      CMY_themes_TAB:
                        - Animation
                        - Bénévole
                        - Autorisation
                        - Musique
      x-stoplight:
        id: ou3j9v0aj7e2a
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - communities
    post:
      summary: Créer une communauté
      responses:
        '200':
          description: 'Renvoie true si l''insertion s''est bien passé. '
      operationId: post-communities
      x-stoplight:
        id: yap6p887t01kl
      description: Crée une communauté à partir des informations passées dans le corps de la requête.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              x-examples:
                Example 1:
                  name: Voyage en Laponie
                  image: 100001.png
                  description: Lorem ipsum dolor "sit amet sen
                  emoji: 1F385
                  color: '#DE3D59'
              required:
                - name
                - image
                - description
                - emoji
                - color
              properties:
                name:
                  type: string
                image:
                  type: string
                description:
                  type: string
                emoji:
                  type: string
                color:
                  type: string
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - communities
  '/communities/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Une communauté
      responses:
        '200':
          description: La communauté renvoyée avec succès
          content:
            application/json:
              schema:
                type: object
                properties:
                  CMY_id_NB:
                    type: integer
                  CMY_name_VC:
                    type: string
                  CMY_image_VC:
                    type: string
                  CMY_emoji_VC:
                    type: string
                  CMY_color_VC:
                    type: string
                  CMY_description_TXT:
                    type: string
                  CMY_creator_NB:
                    type: integer
                x-examples:
                  Example 1:
                    CMY_id_NB: 13
                    CMY_name_VC: Marché de Noël de Strasbourg
                    CMY_image_VC: 100010.png
                    CMY_emoji_VC: 1F389
                    CMY_color_VC: '#DE3D59'
                    CMY_description_TXT: Une description
                    CMY_creator_NB: 92
              examples:
                Example 1:
                  value:
                    CMY_id_NB: 13
                    CMY_name_VC: Marché de Noël de Strasbourg
                    CMY_image_VC: 100010.png
                    CMY_emoji_VC: 1F389
                    CMY_color_VC: '#DE3D59'
                    CMY_description_TXT: Une description
                    CMY_creator_NB: 92
      operationId: get-communities-id
      x-stoplight:
        id: cu2v89ti69pxo
      description: Renvoie la communauté dont l'identifiant est passé en paramètre
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - communities
  /communities/administred:
    get:
      summary: La liste des communautés gérées par un utilisateur
      responses:
        '200':
          description: Un tableau des communautés.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    CMY_id_NB:
                      type: string
                    CMY_name_VC:
                      type: string
                    CMY_emoji_VC:
                      type: string
                    CMY_color_VC:
                      type: string
                    CMY_image_VC:
                      type: string
                    CMY_nb_member_NB:
                      type: string
                    CMY_themes_TAB:
                      type: array
                      items:
                        type: string
                x-examples:
                  Example 1:
                    - CMY_id_NB: '13'
                      CMY_name_VC: Marché de Noël de Strasbourg
                      CMY_emoji_VC: 1F389
                      CMY_color_VC: '#DE3D59'
                      CMY_image_VC: 100010.png
                      CMY_nb_member_NB: '82'
                      CMY_themes_TAB:
                        - Animation
                        - Bénévole
                        - Autorisation
                        - Musique
                        - Décoration
                        - Humanitaire
              examples:
                Example 1:
                  value:
                    - CMY_id_NB: '13'
                      CMY_name_VC: Marché de Noël de Strasbourg
                      CMY_emoji_VC: 1F389
                      CMY_color_VC: '#DE3D59'
                      CMY_image_VC: 100010.png
                      CMY_nb_member_NB: '82'
                      CMY_themes_TAB:
                        - Animation
                        - Bénévole
                        - Autorisation
                        - Musique
                        - Décoration
                        - Humanitaire
      operationId: get-communities-administred
      x-stoplight:
        id: r10z4yo3p6srh
      description: 'Renvoie la liste des communautées gérées par l''utilisateur connecté. '
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - communities
  '/communities/{id}/ongoing':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Les proposition en cours
      responses:
        '200':
          description: Les propositions renvoyées avec succès.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    PRO_id_NB:
                      type: string
                    PRO_title_VC:
                      type: string
                    PRO_color_VC:
                      type: string
                    PRO_period_YEAR:
                      type: string
                    PRO_budget_NB:
                      type: integer
                    PRO_theme_VC:
                      type: string
                    PRO_like_NB:
                      type: integer
                    PRO_dislike_NB:
                      type: integer
                    PRO_love_NB:
                      type: integer
                    PRO_hate_NB:
                      type: integer
                x-examples:
                  Example 1:
                    - PRO_id_NB: '33'
                      PRO_title_VC: Installation d'une grande roue
                      PRO_color_VC: '#DE3D59'
                      PRO_period_YEAR: '2024'
                      PRO_budget_NB: 50000
                      PRO_theme_VC: Animation
                      PRO_like_NB: 16
                      PRO_dislike_NB: 24
                      PRO_love_NB: 8
                      PRO_hate_NB: 4
                    - PRO_id_NB: '35'
                      PRO_title_VC: Atelier de Décoration
                      PRO_color_VC: '#DE3D59'
                      PRO_period_YEAR: '2024'
                      PRO_budget_NB: 8000
                      PRO_theme_VC: Animation
                      PRO_like_NB: 22
                      PRO_dislike_NB: 18
                      PRO_love_NB: 7
                      PRO_hate_NB: 4
                    - PRO_id_NB: '36'
                      PRO_title_VC: Crèche Artisanale
                      PRO_color_VC: '#DE3D59'
                      PRO_period_YEAR: '2024'
                      PRO_budget_NB: 20000
                      PRO_theme_VC: Décoration
                      PRO_like_NB: 25
                      PRO_dislike_NB: 17
                      PRO_love_NB: 7
                      PRO_hate_NB: 4
              examples:
                Example 1:
                  value:
                    - PRO_id_NB: '33'
                      PRO_title_VC: Installation d'une grande roue
                      PRO_color_VC: '#DE3D59'
                      PRO_period_YEAR: '2024'
                      PRO_budget_NB: 50000
                      PRO_theme_VC: Animation
                      PRO_like_NB: 16
                      PRO_dislike_NB: 24
                      PRO_love_NB: 8
                      PRO_hate_NB: 4
                    - PRO_id_NB: '35'
                      PRO_title_VC: Atelier de Décoration
                      PRO_color_VC: '#DE3D59'
                      PRO_period_YEAR: '2024'
                      PRO_budget_NB: 8000
                      PRO_theme_VC: Animation
                      PRO_like_NB: 22
                      PRO_dislike_NB: 18
                      PRO_love_NB: 7
                      PRO_hate_NB: 4
      operationId: get-communities-id-ongoing
      x-stoplight:
        id: wwq0ez66n6msy
      description: Les propositions terminées de la communauté
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - communities
  '/communities/{id}/finished':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Les proposition terminées
      responses:
        '200':
          description: Les propositions renvoyées avec succès
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    PRO_id_NB:
                      type: string
                    PRO_title_VC:
                      type: string
                    PRO_color_VC:
                      type: string
                    PRO_theme_VC:
                      type: string
                x-examples:
                  Example 1:
                    - PRO_id_NB: '33'
                      PRO_title_VC: Installation d'une grande roue
                      PRO_color_VC: '#DE3D59'
                      PRO_theme_VC: Animation
                    - PRO_id_NB: '35'
                      PRO_title_VC: Atelier de Décoration
                      PRO_color_VC: '#DE3D59'
                      PRO_theme_VC: Animation
                    - PRO_id_NB: '36'
                      PRO_title_VC: Crèche Artisanale
                      PRO_color_VC: '#DE3D59'
                      PRO_theme_VC: Décoration
              examples:
                Example 1:
                  value:
                    - PRO_id_NB: '33'
                      PRO_title_VC: Installation d'une grande roue
                      PRO_color_VC: '#DE3D59'
                      PRO_theme_VC: Animation
                    - PRO_id_NB: '35'
                      PRO_title_VC: Atelier de Décoration
                      PRO_color_VC: '#DE3D59'
                      PRO_theme_VC: Animation
                    - PRO_id_NB: '36'
                      PRO_title_VC: Crèche Artisanale
                      PRO_color_VC: '#DE3D59'
                      PRO_theme_VC: Décoration
      operationId: get-communities-id-finished
      x-stoplight:
        id: q9ik1tmpkhtqe
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - communities
  '/communities/{id}/members':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: La liste des membres
      tags:
        - communities
        - members
        - roles
      responses:
        '200':
          description: La liste renvoyé avec succès
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    USR_firstname_VC:
                      type: string
                    USR_lastname_VC:
                      type: string
                    ROL_label_VC:
                      type: string
                    MEM_role_NB:
                      type: integer
                x-examples:
                  Example 1:
                    - USR_firstname_VC: Lonni
                      USR_lastname_VC: Shower
                      ROL_label_VC: Administrateur
                      MEM_role_NB: 1
                    - USR_firstname_VC: Ilise
                      USR_lastname_VC: Winslett
                      ROL_label_VC: Décideur
                      MEM_role_NB: 2
                    - USR_firstname_VC: Madonna
                      USR_lastname_VC: Hayhoe
                      ROL_label_VC: Décideur
                      MEM_role_NB: 2
                    - USR_firstname_VC: Justin
                      USR_lastname_VC: Rowthorne
                      ROL_label_VC: Assesseur
                      MEM_role_NB: 3
                    - USR_firstname_VC: Agathe
                      USR_lastname_VC: Fawthorpe
                      ROL_label_VC: Modérateur
                      MEM_role_NB: 4
                    - USR_firstname_VC: Sonja
                      USR_lastname_VC: Emblem
                      ROL_label_VC: Modérateur
                      MEM_role_NB: 4
                    - USR_firstname_VC: Alexander
                      USR_lastname_VC: Quarles
                      ROL_label_VC: Membre
                      MEM_role_NB: 5
                    - USR_firstname_VC: Alfy
                      USR_lastname_VC: Meader
                      ROL_label_VC: Membre
                      MEM_role_NB: 5
                    - USR_firstname_VC: Allyn
                      USR_lastname_VC: Jozefiak
                      ROL_label_VC: Membre
                      MEM_role_NB: 5
                    - USR_firstname_VC: Alvy
                      USR_lastname_VC: Tumioto
                      ROL_label_VC: Membre
                      MEM_role_NB: 5
                    - USR_firstname_VC: Amata
                      USR_lastname_VC: Lambourn
                      ROL_label_VC: Membre
                      MEM_role_NB: 5
              examples:
                Example 1:
                  value:
                    - USR_firstname_VC: Lonni
                      USR_lastname_VC: Shower
                      ROL_label_VC: Administrateur
                      MEM_role_NB: 1
                    - USR_firstname_VC: Ilise
                      USR_lastname_VC: Winslett
                      ROL_label_VC: Décideur
                      MEM_role_NB: 2
                    - USR_firstname_VC: Justin
                      USR_lastname_VC: Rowthorne
                      ROL_label_VC: Assesseur
                      MEM_role_NB: 3
                    - USR_firstname_VC: Agathe
                      USR_lastname_VC: Fawthorpe
                      ROL_label_VC: Modérateur
                      MEM_role_NB: 4
                    - USR_firstname_VC: Alvy
                      USR_lastname_VC: Tumioto
                      ROL_label_VC: Membre
                      MEM_role_NB: 5
                    - USR_firstname_VC: Amata
                      USR_lastname_VC: Lambourn
                      ROL_label_VC: Membre
                      MEM_role_NB: 5
      operationId: get-communities-id-members
      x-stoplight:
        id: ughoa96xt9xq2
      description: 'Renvoie la liste des membres de la communauté et leur role au sein de la communauté. '
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    post:
      summary: Changer le rôle de membres
      tags:
        - communities
        - members
        - roles
      responses:
        '200':
          description: 'OK, les roles ont été modifiés. Retourn `true`.'
        '401':
          description: 'La modification d''un ou plusieurs roles a été bloqué. Cela peut être dù à différentes raisons, par exemple la retrogradation d''un administrateur sans qu''il en existe un autre.'
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                Example 1:
                  value:
                    Error: Missing Administrator
      operationId: post-communities-id-members
      x-stoplight:
        id: wo9e4fs2ykbl5
      description: Permet de changer le role d'un ou plusieurs membres
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: 'Le cookie d''authentification '
          required: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              x-examples:
                Example 1:
                  '92': '2'
            examples:
              Example 1:
                value:
                  '92': '2'
        description: |-
          Le corps de la requete est un object avec comme clés l'identifiant des utilisateurs dont le role va être changés et en valeur l'identifiant du role. 
          ```json
          {
              "id": "role"
          }
          ```
  '/communities/{id}/themes':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Les thèmes de la communauté
      responses:
        '200':
          description: 'La liste des thèmes récupérés avec succès. '
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    THM_id_NB:
                      type: integer
                    THM_community_NB:
                      type: integer
                    THM_name_VC:
                      type: string
                x-examples:
                  Example 1:
                    - THM_id_NB: 1
                      THM_community_NB: 13
                      THM_name_VC: Animation
                    - THM_id_NB: 2
                      THM_community_NB: 13
                      THM_name_VC: Bénévole
              examples:
                Example 1:
                  value:
                    - THM_id_NB: 1
                      THM_community_NB: 13
                      THM_name_VC: Animation
                    - THM_id_NB: 2
                      THM_community_NB: 13
                      THM_name_VC: Bénévole
      operationId: get-communities-id-themes
      x-stoplight:
        id: c1lu388heaimj
      description: La liste des thèmes d'une communauté
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - themes
        - communities
    post:
      summary: Ajoute un thème à la communauté
      tags:
        - themes
        - communities
      responses:
        '200':
          description: 'OK, le thème est ajouté'
          content:
            application/json:
              schema:
                type: object
                properties:
                  THM_id_NB:
                    type: integer
                  THM_community_NB:
                    type: integer
                  THM_name_VC:
                    type: string
                x-examples:
                  Example 1:
                    THM_id_NB: 8
                    THM_community_NB: 12
                    THM_name_VC: Animation
              examples:
                Example 1:
                  value:
                    THM_id_NB: 8
                    THM_community_NB: 12
                    THM_name_VC: Animation
      operationId: post-communities-id-themes
      x-stoplight:
        id: 6i7fe5z63rems
      description: 'Ajoute un thème à la communauté, le budget du thème déclaré est défini pour la periode en cours.'
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                budget:
                  type: integer
              x-examples:
                Example 1:
                  name: Animation
                  budget: 2300
            examples:
              Example 1:
                value:
                  name: Animation
                  budget: 2300
  '/users/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Les informations d'un utilisateur
      tags:
        - users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  USR_id_NB:
                    type: integer
                  USR_lastname_VC:
                    type: string
                  USR_firstname_VC:
                    type: string
                  USR_email_VC:
                    type: string
                x-examples:
                  Example 1:
                    USR_id_NB: 12
                    USR_lastname_VC: Aymes
                    USR_firstname_VC: Linzy
                    USR_email_VC: laymesb@mayoclinic.com
              examples:
                Example 1:
                  value:
                    USR_id_NB: 12
                    USR_lastname_VC: Aymes
                    USR_firstname_VC: Linzy
                    USR_email_VC: laymesb@mayoclinic.com
      operationId: get-users-id
      x-stoplight:
        id: 6e6vbwt06rq5l
      description: 'Récupère le nom, prénom et mail d''un utilisateur.'
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  /users/me:
    get:
      summary: Renvoie le nom de l'utilisateur connecté
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  USR_id_NB:
                    type: integer
                  USR_lastname_VC:
                    type: string
                  USR_firstname_VC:
                    type: string
                x-examples:
                  Example 1:
                    USR_id_NB: 92
                    USR_lastname_VC: Shower
                    USR_firstname_VC: Lonni
              examples:
                Example 1:
                  value:
                    USR_id_NB: 92
                    USR_lastname_VC: Shower
                    USR_firstname_VC: Lonni
      operationId: get-users-me-name
      x-stoplight:
        id: 1w6ifa68b31iw
      description: ''
      tags:
        - users
      parameters:
        - schema:
            type: string
          in: cookie
          description: Le cookie d'authentification
          required: true
          name: PHPSESSID
    parameters: []
    delete:
      summary: Supprimer un utilisateur
      tags:
        - users
      responses:
        '200':
          description: OK
        '400':
          description: 'Bad Request, vous ne pouvez pas supprimer l''utilisateur'
      operationId: delete-users-me
      x-stoplight:
        id: 7ymscuukuxs82
      description: Supprimer l'utilisateur si il n'est pas administrateur d'un groupe
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  '/users/me/role/{community}':
    get:
      summary: Le rôle de l'utilisateur
      tags:
        - users
        - roles
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  MEM_role_NB:
                    type: integer
                  ROL_label_VC:
                    type: string
                x-examples:
                  Example 1:
                    MEM_role_NB: 1
                    ROL_label_VC: Administrateur
              examples:
                Example 1:
                  value:
                    MEM_role_NB: 1
                    ROL_label_VC: Administrateur
      operationId: get-users-me-role-community
      x-stoplight:
        id: hjt9so3qxv0y8
      description: Renvoie le rôle de l'utilisateur connecté dans la communauté passée via l'url.
      parameters:
        - schema:
            type: string
          in: cookie
          description: Le cookie d'authentification
          name: PHPSESSID
          required: true
    parameters:
      - schema:
          type: string
        name: community
        in: path
        required: true
  /users/me/information:
    parameters: []
    patch:
      summary: Mettre à jour les informations de l'utilisateur connecté
      tags:
        - users
      responses:
        '200':
          description: 'OK, un boolean `true` si la requete s''est bien déroulée.'
        '400':
          description: 'Bad Request, en cas d''erreur lors de la mise à jour d''une donnée.'
        '422':
          description: Unprocessable Entity (WebDAV) si l'entrée est invalide.
      operationId: patch-users-me-information
      x-stoplight:
        id: si9wp7uka4duw
      description: Mets à jour les informations de l'utilisateur connecté.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        description: "Les nouvelles informations de l'utilisateur.\r\nVoici la liste des éléments du body :\r\n- `birthdate` : `string`.\r\n- `address` : `string`.\r\n- `zipcode` : `string`.\r\n- `email` : `string`."
        content:
          application/json:
            schema:
              type: object
              properties:
                birthdate:
                  type: string
                address:
                  type: string
                zipcode:
                  type: string
                email:
                  type: string
              x-examples:
                Example 1:
                  birthdate: '2000-10-02'
                  address: 40 rue de la paix
                  zipcode: '75001'
                  email: exampleOfEmail@email.com
            examples:
              Example 1:
                value:
                  birthdate: '2000-10-02'
                  address: 40 rue de la paix
                  zipcode: '75001'
                  email: exampleOfEmail@email.com
  /users/me/password:
    parameters: []
    patch:
      summary: Mettre à jour le mot de passe de l'utilisateur connecté
      tags:
        - users
      responses:
        '200':
          description: 'OK, un boolean `true` si la requete s''est bien déroulée.'
        '400':
          description: 'Bad Request, en cas d''erreur lors de la mise à jour d''une donnée.'
        '422':
          description: Unprocessable Entity (WebDAV) si l'entrée est invalide.
      operationId: patch-users-me-password
      description: Mets à jour le mot de passe de l'utilisateur connecté.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        description: "Les nouvelles informations de l'utilisateur.\r\nVoici l'élement contenu dans le body :\r\n- `password` : `string`."
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
              x-examples:
                Example 1:
                  password: exampleOfPassword
            examples:
              Example 1:
                value:
                  password: exampleOfPassword
      x-stoplight:
        id: rkysea2k9fn7c
  /users/me/notification:
    patch:
      summary: Mettre à jour les paramètres de notification de l'utilisateur connecté
      tags:
        - users
      responses:
        '200':
          description: 'OK, un boolean `true` si la requete s''est bien déroulée.'
        '400':
          description: 'Bad Request, en cas d''erreur lors de la mise à jour d''une donnée.'
        '422':
          description: Unprocessable Entity (WebDAV) si l'entrée est invalide.
      operationId: patch-users-me-notification
      description: Mets à jour les paramètres de notification de l'utilisateur connecté.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        description: "Les nouveaux paramètres de notification de l'utilisateur.\r\nVoici la liste des éléments du body :\r\n- `newProposal` : `int`.\r\n- `startOfVoting` : `int`.\r\n- `reactionToTheProposals` : `int`.\r\n- `notificationFrequency` : `string`."
        content:
          application/json:
            schema:
              type: object
              properties:
                newProposal:
                  type: integer
                startOfVoting:
                  type: integer
                reactionToTheProposals:
                  type: integer
                notificationFrequency:
                  type: string
              x-examples:
                Example 1:
                  newProposal: 1
                  startOfVoting: 1
                  reactionToTheProposals: 0
                  notificationFrequency: Q
            examples:
              Example 1:
                value:
                  newProposal: 1
                  startOfVoting: 1
                  reactionToTheProposals: 0
                  notificationFrequency: Q
      x-stoplight:
        id: ug8a1z65ft778
    parameters: []
  /proposals/ongoing:
    get:
      summary: La liste des propositions
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    PRO_id_NB:
                      type: string
                    PRO_title_VC:
                      type: string
                    PRO_color_VC:
                      type: string
                    PRO_theme_VC:
                      type: string
                x-examples:
                  Example 1:
                    - PRO_id_NB: '22'
                      PRO_title_VC: Remonter un moteur diesel
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Atelier Mecanique
                    - PRO_id_NB: '71'
                      PRO_title_VC: 24h du mans 2025
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Rassemblement
                    - PRO_id_NB: '24'
                      PRO_title_VC: Planification des horaires
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Organisation
              examples:
                Example 1:
                  value:
                    - PRO_id_NB: '22'
                      PRO_title_VC: Remonter un moteur diesel
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Atelier Mecanique
                    - PRO_id_NB: '71'
                      PRO_title_VC: 24h du mans 2025
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Rassemblement
                    - PRO_id_NB: '24'
                      PRO_title_VC: Planification des horaires
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Organisation
      operationId: get-proposals-ongoing
      x-stoplight:
        id: zmd7aij7len3x
      description: Renvoie la liste des propositions en cours des communautés auxquelles participe l'utilisateur
      tags:
        - proposals
      parameters:
        - schema:
            type: string
          in: cookie
          description: Le cookie d'authentification
          required: true
          name: PHPSESSID
  /proposals/finished:
    get:
      summary: Les propositions terminées
      tags:
        - proposals
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    PRO_id_NB:
                      type: string
                    PRO_title_VC:
                      type: string
                    PRO_color_VC:
                      type: string
                    PRO_theme_VC:
                      type: string
                x-examples:
                  Example 1:
                    - PRO_id_NB: '22'
                      PRO_title_VC: Remonter un moteur diesel
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Atelier Mecanique
                    - PRO_id_NB: '71'
                      PRO_title_VC: 24h du mans 2025
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Rassemblement
                    - PRO_id_NB: '24'
                      PRO_title_VC: Planification des horaires
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Organisation
              examples:
                Example 1:
                  value:
                    - PRO_id_NB: '22'
                      PRO_title_VC: Remonter un moteur diesel
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Atelier Mecanique
                    - PRO_id_NB: '71'
                      PRO_title_VC: 24h du mans 2025
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Rassemblement
                    - PRO_id_NB: '24'
                      PRO_title_VC: Planification des horaires
                      PRO_color_VC: '#13329F'
                      PRO_theme_VC: Organisation
      operationId: get-proposals-finished
      x-stoplight:
        id: nzkvvamc95zdn
      description: Renvoie une liste avec les propositions terminées récemment dans les communautés de l'utilisateur (max 6 propositions).
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
  /proposals:
    post:
      summary: Créer une proposition
      tags:
        - proposals
      responses:
        '200':
          description: 'OK, renvoie `true` si l''insertion réussi, `false` sinon.'
      operationId: post-proposals
      x-stoplight:
        id: yk2cld9c0awht
      description: Permet de créer une nouvelle proposition
      requestBody:
        content:
          application/json:
            schema:
              type: object
              x-examples:
                Example 1:
                  title: Augmenter les performances du serveur
                  description: 'Cette proposition vise à optimiser les performances du serveur afin d''améliorer la rapidité, la fiabilité et l''efficacité des services qu''il prend en charge. Les objectifs incluent la réduction des temps de latence, l''augmentation de la capacité de traitement des demandes simultanées, et l''amélioration de la stabilité du système.'
                  community: 26
                  theme: 1
              properties:
                title:
                  type: string
                description:
                  type: string
                community:
                  type: integer
                theme:
                  type: integer
                year:
                  type: integer
                  x-stoplight:
                    id: ylyt08l20ceig
            examples:
              Example 1:
                value:
                  title: Augmenter les performances du serveur
                  description: 'Cette proposition vise à optimiser les performances du serveur afin d''améliorer la rapidité, la fiabilité et l''efficacité des services qu''il prend en charge. Les objectifs incluent la réduction des temps de latence, l''augmentation de la capacité de traitement des demandes simultanées, et l''amélioration de la stabilité du système.'
                  community: 26
                  theme: 1
                  year: 2025
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
  '/proposals/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: L'identifiant de la proposition
      - schema:
          type: string
        in: cookie
        name: PHPSESSID
        description: Le cookie d'authentification
        required: true
    get:
      summary: Récupérer les informations d'une proposition
      responses:
        '200':
          description: 'OK, les informations sont renvoyées avec succès'
          content:
            application/json:
              schema:
                type: object
                properties:
                  PRO_id_NB:
                    type: string
                  PRO_title_VC:
                    type: string
                  PRO_description_TXT:
                    type: string
                  PRO_period_YEAR:
                    type: string
                  PRO_budget_NB:
                    type: integer
                  PRO_discussion_duration_NB:
                    type: integer
                  PRO_creation_DATE:
                    type: string
                  PRO_status_VC:
                    type: string
                  PRO_theme_VC:
                    type: string
                  PRO_location_VC:
                    type: string
                  PRO_community_NB:
                    type: integer
                  PRO_initiator_NB:
                    type: integer
                x-examples:
                  Example 1:
                    PRO_id_NB: '13'
                    PRO_title_VC: Atelier d'Amélioration Technique
                    PRO_description_TXT: Atelier pour travailler les techniques de jeu.
                    PRO_period_YEAR: '2024'
                    PRO_budget_NB: 2000
                    PRO_discussion_duration_NB: 10
                    PRO_creation_DATE: '2024-09-29 15:32:02'
                    PRO_status_VC: En cours
                    PRO_theme_VC: Compétition
                    PRO_location_VC: Gymnase du Club
                    PRO_community_NB: 5
                    PRO_initiator_NB: 38
              examples:
                Example 1:
                  value:
                    PRO_id_NB: '13'
                    PRO_title_VC: Atelier d'Amélioration Technique
                    PRO_description_TXT: Atelier pour travailler les techniques de jeu.
                    PRO_period_YEAR: '2024'
                    PRO_budget_NB: 2000
                    PRO_discussion_duration_NB: 10
                    PRO_creation_DATE: '2024-09-29 15:32:02'
                    PRO_status_VC: En cours
                    PRO_theme_VC: Compétition
                    PRO_location_VC: Gymnase du Club
                    PRO_community_NB: 5
                    PRO_initiator_NB: 38
      operationId: get-proposals-id
      x-stoplight:
        id: 0wy2nqayj5n09
      tags:
        - proposals
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    patch:
      summary: Mettre à jour une donnée
      tags:
        - proposals
      responses:
        '200':
          description: 'OK, un boolean `true` si la requete s''est bien déroulée.'
        '400':
          description: 'Bad Request, une erreur est survenue. Peut provenir d''un dépassement de budget'
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
                x-examples:
                  Example 1:
                    Error: 'Erreur : Le budget de cette proposition fait dépasser le budget total alloué pour son thème.'
              examples:
                Example 1:
                  value:
                    Error: 'Erreur : Le budget de cette proposition fait dépasser le budget total alloué pour son thème.'
      operationId: patch-proposals-id
      x-stoplight:
        id: 11v2pp9xg52p4
      description: 'Mets à jour les données de proposals, il n''est pas nécessaire de mettre à joute toutes les données, une seule suffit. '
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        description: |-
          Les éléments à modifier ainsi que leur nouvelle valeur. 
          Voici la liste des éléments modifiables
          - `budget` : `float`.
        content:
          application/json:
            schema:
              type: object
              properties: {}
            examples:
              Example 1:
                value:
                  budget: 12000
    delete:
      summary: Supprimer une proposition
      tags:
        - proposals
      responses:
        '200':
          description: 'OK, la proposition a été supprimée `true`.'
        '403':
          description: 'Forbidden, vous n''avez pas les droits sur la proposition. Renvoie `false`.'
      operationId: delete-proposals-id
      x-stoplight:
        id: 2crq6q895xu2f
      description: Permet de supprimer une proposition
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
  '/proposals/{id}/comment':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Lister les commentaires d'une proposition
      tags:
        - proposals
        - comments
      responses:
        '200':
          description: 'OK, les commentaires sont renvoyés avec succès.'
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    COM_id_NB:
                      type: integer
                    COM_creation_DATE:
                      type: string
                    COM_message_VC:
                      type: string
                    COM_sender_fname_VC:
                      type: string
                    COM_sender_lname_VC:
                      type: string
                    COM_sender_NB:
                      type: string
                x-examples:
                  Example 1:
                    - COM_id_NB: 2
                      COM_creation_DATE: '2024-11-01 10:46:43'
                      COM_message_VC: 'La proposition me paraît être une bonne idée, vous en pensez quoi ?'
                      COM_sender_fname_VC: Arabelle
                      COM_sender_lname_VC: Lundbeck
                      COM_sender_NB: '18'
                    - COM_id_NB: 3
                      COM_creation_DATE: '2024-11-02 09:19:23'
                      COM_message_VC: 'Pourquoi pas, c''est la tradition après tout.'
                      COM_sender_fname_VC: Sonja
                      COM_sender_lname_VC: Emblem
                      COM_sender_NB: '23'
              examples:
                Example 1:
                  value:
                    - COM_id_NB: 2
                      COM_creation_DATE: '2024-11-01 10:46:43'
                      COM_message_VC: 'La proposition me paraît être une bonne idée, vous en pensez quoi ?'
                      COM_sender_fname_VC: Arabelle
                      COM_sender_lname_VC: Lundbeck
                      COM_sender_NB: '18'
                    - COM_id_NB: 3
                      COM_creation_DATE: '2024-11-02 09:19:23'
                      COM_message_VC: 'Pourquoi pas, c''est la tradition après tout.'
                      COM_sender_fname_VC: Sonja
                      COM_sender_lname_VC: Emblem
                      COM_sender_NB: '23'
      operationId: get-proposals-id-comment
      x-stoplight:
        id: jk8owj7x3ubqy
      description: Affiche la discussion d'une proposition. Les commentaires sont triés chronologiquement.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  /comments:
    post:
      summary: Poster un commentaire
      tags:
        - comments
      responses:
        '200':
          description: 'OK, le commentaire est correctement ajouté. Le commentaire créée est renvoyé.'
          content:
            application/json:
              schema:
                type: object
                properties:
                  COM_id_NB:
                    type: integer
                  COM_message_VC:
                    type: string
                  COM_proposal_NB:
                    type: integer
                  COM_sender_NB:
                    type: string
                x-examples:
                  Example 1:
                    COM_id_NB: 106
                    COM_message_VC: Je trouve ça super !
                    COM_proposal_NB: 22
                    COM_sender_NB: '92'
              examples:
                Example 1:
                  value:
                    COM_id_NB: 106
                    COM_message_VC: Je trouve ça super !
                    COM_proposal_NB: 22
                    COM_sender_NB: '92'
      operationId: post-comments
      x-stoplight:
        id: null
      description: 'Poster un commentaire sur une proposition, il faut indiquer le message et la proposition sur laquelle le message est posté.'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                proposal:
                  type: integer
              x-examples:
                Example 1:
                  message: Je trouve ça super !
                  proposal: 22
            examples:
              Example 1:
                value:
                  message: Je trouve ça super !
                  proposal: 22
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
  '/proposals/{id}/reactions':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Les reactions à une proposition
      tags:
        - reactions
        - proposals
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  nblove:
                    type: integer
                  nblike:
                    type: integer
                  nbdislike:
                    type: integer
                  nbhate:
                    type: integer
                  hasReacted:
                    type: integer
                x-examples:
                  Example 1:
                    nblove: 7
                    nblike: 30
                    nbdislike: 19
                    nbhate: 5
                    hasReacted: 1
              examples:
                Example 1:
                  value:
                    nblove: 7
                    nblike: 30
                    nbdislike: 19
                    nbhate: 5
                    hasReacted: 1
      operationId: get-proposals-id-reactions
      x-stoplight:
        id: epmwiwv0wwd6e
      description: 'Récupère le compte de chaque type de reaction sur la proposition et indique si l''utilisateur a déjà réagit (avec le numero associé à sa réaction, `0` représentant le fait qu''il n''a pas réagit).'
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    post:
      summary: Réagir à une proposition
      tags:
        - reactions
        - proposals
      responses:
        '200':
          description: 'OK, renvoie `true`si la reaction a été prise en compte, `false` sinon. En cas de false cela indique généralement qu''une réaction est déjà enregistrée.'
      operationId: post-proposals-id-reactions
      x-stoplight:
        id: r5d0kwybb1hdh
      description: Réagir à une proposition
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reaction:
                  type: integer
              x-examples:
                Example 1:
                  reaction: 1
            examples:
              Example 1:
                value:
                  reaction: 1
        description: |-
          Contient la réaction. Peut prendre les valeurs suivantes : 
          - `1`: J'aime
          - `2`: Je n'aime pas
          - `3`: J'adore
          - `4`: Je deteste
  '/proposals/{id}/request':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    post:
      summary: Envoyer la demande de l'utilisateur
      tags:
        - proposals
      responses:
        '200':
          description: 'OK, un boolean indiquant si la demande à été prise en compte, `true` si oui, `false` sinon. (En cas de `false`, c''est généralement que l''utilisateur à déjà demandé) '
      operationId: post-proposals-id-request
      x-stoplight:
        id: vkzhzyzvmrpxq
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    get:
      summary: Les informations sur les demandes formelles
      tags:
        - proposals
      responses:
        '200':
          description: 'OK, le boolean est `true` si l''utilisateur a demandé, `false` sinon.'
          content:
            application/json:
              schema:
                type: object
                properties:
                  PRO_request_count_NB:
                    type: integer
                  hasAsked:
                    type: boolean
                x-examples:
                  Example 1:
                    PRO_request_count_NB: 1
                    hasAsked: true
              examples:
                Example 1:
                  value:
                    PRO_request_count_NB: 1
                    hasAsked: true
      operationId: get-proposals-id-request
      x-stoplight:
        id: jw3vltnog8nzx
      description: Renvoie le nombre de demande formelle et un boolean indiquant si l'utilisateur a déjà fait une demande.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          required: true
          description: Le cookie d'authentification
  '/comments/{id}/reactions':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Les réactions sur un commentaire
      tags:
        - comments
        - reactions
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  nblove:
                    type: integer
                  nblike:
                    type: integer
                  nbdislike:
                    type: integer
                  nbhate:
                    type: integer
                  hasReacted:
                    type: boolean
                x-examples:
                  Example 1:
                    nblove: 3
                    nblike: 2
                    nbdislike: 1
                    nbhate: 0
                    hasReacted: true
              examples:
                Example 1:
                  value:
                    nblove: 3
                    nblike: 2
                    nbdislike: 1
                    nbhate: 0
                    hasReacted: true
      operationId: get-comments-id-reactions
      x-stoplight:
        id: 4xx51he23v90p
      description: Récupère le compte de chaque type de reaction sur le commentaire et indique si l'utilisateur a déjà réagit (`false` représentant le fait qu'il n'a pas réagit).
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    post:
      summary: Réagir à un commentaire
      tags:
        - comments
        - reactions
      responses:
        '200':
          description: 'OK, renvoie `true`si la reaction a été prise en compte, `false` sinon. En cas de false cela indique généralement qu''une réaction est déjà enregistrée.'
      operationId: post-comments-id-reactions
      x-stoplight:
        id: 29deihj3kg3dl
      description: Réagir à un commentaire
      requestBody:
        description: |-
          Contient la réaction. Peut prendre les valeurs suivantes : 
          - `1`: J'aime
          - `2`: Je n'aime pas
          - `3`: J'adore
          - `4`: Je deteste
        content:
          application/json:
            schema:
              type: object
              properties:
                reaction:
                  type: integer
              x-examples:
                Example 1:
                  reaction: 1
            examples:
              Example 1:
                value:
                  reaction: 1
  '/proposals/{id}/membership':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Vérifie que l'utilisateur peut accéder à la proposition
      tags:
        - proposals
      responses:
        '200':
          description: '`true` si l''utilisateur peut accéder, `false` sinon.'
      operationId: get-proposals-id-membership
      x-stoplight:
        id: ds9qqy9qob5vo
      description: Verifie que l'utilisateur peut accéder à la proposition (donc qu'il est membres de la communauté associée à la proposition).
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  '/communities/{id}/membership':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Vérifie que l'utilisateur est membre de la communauté
      responses:
        '200':
          description: 'Renvoie `true` si l''utilisateur est membre, `false` sinon.'
      operationId: get-communities-id-membership
      x-stoplight:
        id: 4q6zqvueiscka
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - communities
  '/comment/{id}/report':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    post:
      summary: Signaler un commentaire
      responses:
        '200':
          description: 'OK, renvoie `true` si le message a été signalé, `false` sinon.'
      operationId: post-comment-id-report
      x-stoplight:
        id: 9sokzq48tpzbk
      description: 'Permet de signaler un commentaire. '
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          required: true
          description: Le cookie d'authentification
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: integer
              x-examples:
                Example 1:
                  reason: 1
            examples:
              Example 1:
                value:
                  reason: 1
        description: '`reason` est en entier contenant un des motifs de signalement définis. '
      tags:
        - comments
  '/proposals/{id}/votes':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
      - schema:
          type: string
        in: cookie
        name: PHPSESSID
        description: Le cookie d'authentification
        required: true
    get:
      summary: Récupère les informations des votes
      tags:
        - proposals
        - votes
      responses:
        '200':
          description: 'OK, les informations récupérées.'
          content:
            application/json:
              schema:
                type: array
                x-examples:
                  Example 1:
                    - VOT_proposal_NB: 34
                      VOT_round_NB: 1
                      VOT_valid_BOOL: '1'
                      VOT_start_DATE: '2024-10-27 00:00:00'
                      VOT_end_DATE: '2024-11-02 23:59:59'
                      VOT_type_NB: 4
                      VOT_type_VC: Scrutin majoritaire (deux tours)
                      VOT_nb_rounds_NB: '2'
                      VOT_possibilities_TAB:
                        - - M. Pokora
                          - 1
                        - - Claudio Capéo
                          - 2
                        - - Vitaa
                          - 3
                        - - Christian Dingler
                          - 4
                        - - Matthieu Chedid
                          - 5
                        - - Patricia Kaas
                          - 6
                      hasVoted: 0
                    - VOT_proposal_NB: 34
                      VOT_round_NB: 2
                      VOT_valid_BOOL: '1'
                      VOT_start_DATE: '2024-12-19 00:00:00'
                      VOT_end_DATE: '2024-12-31 23:59:59'
                      VOT_type_NB: 4
                      VOT_type_VC: Scrutin majoritaire (deux tours)
                      VOT_nb_rounds_NB: '2'
                      VOT_possibilities_TAB:
                        - - M. Pokora
                          - 144
                        - - Claudio Capéo
                          - 145
                      hasVoted: 1
                items:
                  type: object
                  properties:
                    VOT_proposal_NB:
                      type: integer
                    VOT_round_NB:
                      type: integer
                    VOT_valid_BOOL:
                      type: string
                    VOT_start_DATE:
                      type: string
                    VOT_end_DATE:
                      type: string
                    VOT_type_NB:
                      type: integer
                    VOT_type_VC:
                      type: string
                    VOT_nb_rounds_NB:
                      type: string
                    VOT_possibilities_TAB:
                      type: array
                      items:
                        type: array
                        items: {}
                    hasVoted:
                      type: integer
              examples:
                Example 1:
                  value:
                    - VOT_proposal_NB: 34
                      VOT_round_NB: 1
                      VOT_valid_BOOL: '1'
                      VOT_start_DATE: '2024-10-27 00:00:00'
                      VOT_end_DATE: '2024-11-02 23:59:59'
                      VOT_type_NB: 4
                      VOT_type_VC: Scrutin majoritaire (deux tours)
                      VOT_nb_rounds_NB: '2'
                      VOT_possibilities_TAB:
                        - - M. Pokora
                          - 1
                        - - Claudio Capéo
                          - 2
                        - - Vitaa
                          - 3
                        - - Christian Dingler
                          - 4
                        - - Matthieu Chedid
                          - 5
                        - - Patricia Kaas
                          - 6
                      hasVoted: 0
                    - VOT_proposal_NB: 34
                      VOT_round_NB: 2
                      VOT_valid_BOOL: '1'
                      VOT_start_DATE: '2024-12-19 00:00:00'
                      VOT_end_DATE: '2024-12-31 23:59:59'
                      VOT_type_NB: 4
                      VOT_type_VC: Scrutin majoritaire (deux tours)
                      VOT_nb_rounds_NB: '2'
                      VOT_possibilities_TAB:
                        - - M. Pokora
                          - 144
                        - - Claudio Capéo
                          - 145
                      hasVoted: 1
      operationId: get-proposals-id-votes
      x-stoplight:
        id: xvknjkafyuv5o
      description: |-
        Récupère les informations concernants les différents tours qui composent le vote de la proposition. 
        Indique également si l'utilisateur connecté a déjà voté.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    post:
      summary: Enregistrer les paramètres d'un vote
      tags:
        - votes
        - proposals
      responses:
        '200':
          description: 'OK, un boolean indiquant si le vote a été crée'
        '400':
          description: 'Bad Request, le vote existe déjà'
        '403':
          description: 'Forbidden, vous n''avez pas le droit de créer un vote dans cette communauté'
        '422':
          description: 'Unprocessable Entity (WebDAV), le corps de la requete est invalide.'
      operationId: post-proposals-id-votes
      x-stoplight:
        id: 6zqbvkfz9vkn4
      requestBody:
        description: |-
          - `system`: le type de scrutin
          - `discussionDuration`: la durée de discussion
          - `voteDuration`: la durée du voteDuration
          - `possibilities`: un tableau contenant les choix du vote (que si le vote n'est pas un POUR/CONTRE ou OUI/NON)
        content:
          application/json:
            schema:
              type: object
              properties:
                system:
                  type: integer
                discussionDuration:
                  type: integer
                voteDuration:
                  type: integer
                possibilities:
                  type: array
                  items:
                    type: string
              x-examples:
                Example 1:
                  system: 4
                  discussionDuration: 4
                  voteDuration: 4
                  possibilities:
                    - choix 1
                    - choix 2
                    - choix 3
            examples:
              Example 1:
                value:
                  system: 4
                  discussionDuration: 4
                  voteDuration: 4
                  possibilities:
                    - choix 1
                    - choix 2
                    - choix 3
    put:
      summary: Modifier les paramètres d'un vote
      tags:
        - votes
        - proposals
      responses:
        '200':
          description: 'OK, un boolean indiquant si le vote a été modifié'
        '400':
          description: 'Bad Request, le vote a déjà commencé, impossible de le modifier'
        '403':
          description: 'Forbidden, vous n''avez pas les droits pour manipuler les votes sur cette proposition'
        '422':
          description: 'Unprocessable Entity (WebDAV), le corps de la requete est invalide.'
      operationId: put-proposals-id-votes
      x-stoplight:
        id: pilejvcil1389
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                system:
                  type: integer
                discussionDuration:
                  type: integer
                voteDuration:
                  type: integer
                possibilities:
                  type: array
                  items:
                    type: string
              x-examples:
                Example 1:
                  system: 4
                  discussionDuration: 4
                  voteDuration: 4
                  possibilities:
                    - choix 1
                    - choix 2
                    - choix 3
            examples:
              Example 1:
                value:
                  system: 4
                  discussionDuration: 4
                  voteDuration: 4
                  possibilities:
                    - choix 1
                    - choix 2
                    - choix 3
        description: |-
          - `system`: le type de scrutin
          - `discussionDuration`: la durée de discussion
          - `voteDuration`: la durée du voteDuration
          - `possibilities`: un tableau contenant les choix du vote (que si le vote n'est pas un POUR/CONTRE ou OUI/NON)
  '/proposals/{id}/{round}/vote':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
      - schema:
          type: string
        name: round
        in: path
        required: true
    get:
      summary: Récupère les résultats du tour
      tags:
        - proposals
        - votes
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    POS_label_VC:
                      type: string
                    POS_nbVotes_NB:
                      type: integer
                    POS_percentNbVotes_NB:
                      type: integer
                x-examples:
                  Example 1:
                    - POS_label_VC: Contre
                      POS_nbVotes_NB: 4
                      POS_percentNbVotes_NB: 50
                    - POS_label_VC: Pour
                      POS_nbVotes_NB: 4
                      POS_percentNbVotes_NB: 50
              examples:
                Example 1:
                  value:
                    - POS_label_VC: Claudio Capéo
                      POS_nbVotes_NB: 34
                      POS_percentNbVotes_NB: 52
                    - POS_label_VC: M. Pokora
                      POS_nbVotes_NB: 31
                      POS_percentNbVotes_NB: 48
      operationId: get-proposals-id-round-vote
      x-stoplight:
        id: avx9kuajudo44
      description: Récupère les résultats d'un tour de vote (le nombre de vote et le pourcentage de chaque possibilité)
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    post:
      summary: Enregistre un vote
      tags:
        - proposals
        - votes
      responses:
        '200':
          description: 'OK, renvoie `true` si le vote a été enregistré.'
        '401':
          description: 'Unauthorized, vous ne faites pas partie de la communauté, vous ne pouvez pas voter.'
        '422':
          description: |-
            Unprocessable Entity (WebDAV), le choix passé en paramètre est incorrecte, plus de détails sont donnés dans le corps de la réponse.
            Les erreurs possibles sont entre autre: 
            - L'utilisateur a déjà voté
            - `choice` ne correspond pas au format attendu
            - `choice` n'est pas une possibilité
          content:
            application/json:
              schema:
                type: object
                properties:
                  Unprocessable Entity:
                    type: string
                x-examples:
                  Example 1:
                    Unprocessable Entity: You have already voted
              examples:
                Example 1:
                  value:
                    Unprocessable Entity: Missing or incorrect data
                Example 2:
                  value:
                    Unprocessable Entity: You have already voted
      operationId: post-proposals-id-round-vote
      x-stoplight:
        id: 0luo8yj88kfvq
      description: 'Enregistre le vote de l''utilisateur connecté, le choix est fourni dans le body via `choice` il doit être entier et correspondre à une des possibilités du vote. Évidement seul les membres d''un groupe peuvent voter sur une proposition du groupe.'
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
  '/communities/{id}/adopted':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: La liste des propositions adoptées
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    PRO_id_NB:
                      type: string
                    PRO_title_VC:
                      type: string
                    PRO_color_VC:
                      type: string
                    PRO_period_YEAR:
                      type: string
                    PRO_budget_NB:
                      type: integer
                    PRO_theme_VC:
                      type: string
                    PRO_like_NB:
                      type: integer
                    PRO_dislike_NB:
                      type: integer
                    PRO_love_NB:
                      type: integer
                    PRO_hate_NB:
                      type: integer
                x-examples:
                  Example 1:
                    - PRO_id_NB: '5'
                      PRO_title_VC: Atelier de Peinture
                      PRO_color_VC: '#5AB7EE'
                      PRO_period_YEAR: '2024'
                      PRO_budget_NB: 4000
                      PRO_theme_VC: Activité
                      PRO_like_NB: 5
                      PRO_dislike_NB: 2
                      PRO_love_NB: 1
                      PRO_hate_NB: 1
              examples:
                Example 1:
                  value:
                    - PRO_id_NB: '5'
                      PRO_title_VC: Atelier de Peinture
                      PRO_color_VC: '#5AB7EE'
                      PRO_period_YEAR: '2024'
                      PRO_budget_NB: 4000
                      PRO_theme_VC: Activité
                      PRO_like_NB: 5
                      PRO_dislike_NB: 2
                      PRO_love_NB: 1
                      PRO_hate_NB: 1
      operationId: get-communities-id-adopted
      x-stoplight:
        id: xfiowza6haxc8
      description: 'Récupère la liste des propositions adoptées par la communauté. Par défaut toutes les propositions sont récupérées, il est possible de filter via la clé `period` en paramètre GET de l''url.'
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      tags:
        - communities
  '/communities/{id}/voted':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: La liste des propositions dont le vote est terminé
      tags:
        - communities
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    PRO_id_NB:
                      type: string
                    PRO_title_VC:
                      type: string
                    PRO_color_VC:
                      type: string
                    PRO_budget_NB:
                      type: integer
                    PRO_theme_VC:
                      type: string
                    PRO_like_NB:
                      type: integer
                    PRO_dislike_NB:
                      type: integer
                    PRO_love_NB:
                      type: integer
                    PRO_hate_NB:
                      type: integer
                x-examples:
                  Example 1:
                    - PRO_id_NB: '33'
                      PRO_title_VC: Installation d'une grande roue
                      PRO_color_VC: '#DE3D59'
                      PRO_budget_NB: 50000
                      PRO_theme_VC: Animation
                      PRO_like_NB: 16
                      PRO_dislike_NB: 24
                      PRO_love_NB: 8
                      PRO_hate_NB: 4
              examples:
                Example 1:
                  value:
                    - PRO_id_NB: '33'
                      PRO_title_VC: Installation d'une grande roue
                      PRO_color_VC: '#DE3D59'
                      PRO_budget_NB: 50000
                      PRO_theme_VC: Animation
                      PRO_like_NB: 16
                      PRO_dislike_NB: 24
                      PRO_love_NB: 8
                      PRO_hate_NB: 4
      operationId: get-communities-id-voted
      x-stoplight:
        id: wumb2vtnolwc8
      description: Renvoie la liste des propositions dont le vote est terminé. Ces propositions sont dites "en attente d'action".
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  '/communities/{id}/budget':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Les informations budgétaire de la communauté
      tags:
        - budget
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  CMY_budget_NB:
                    type: integer
                  CMY_used_budget_NB:
                    type: integer
                  CMY_fixed_fees_NB:
                    type: integer
                  CMY_budget_theme_NB:
                    type: array
                    items:
                      type: object
                      properties:
                        THM_name_VC:
                          type: string
                        BUT_amount_NB:
                          type: integer
                        BUT_used_budget_NB:
                          type: integer
                x-examples:
                  Example 1:
                    CMY_budget_NB: 211000
                    CMY_used_budget_NB: 0
                    CMY_fixed_fees_NB: 211000
                    CMY_budget_theme_NB:
                      - THM_name_VC: Animation
                        BUT_amount_NB: 61000
                        BUT_used_budget_NB: 0
                      - THM_name_VC: Bénévole
                        BUT_amount_NB: 12000
                        BUT_used_budget_NB: 0
              examples:
                Example 1:
                  value:
                    CMY_budget_NB: 211000
                    CMY_used_budget_NB: 0
                    CMY_fixed_fees_NB: 211000
                    CMY_budget_theme_NB:
                      - THM_name_VC: Animation
                        BUT_amount_NB: 61000
                        BUT_used_budget_NB: 0
                      - THM_name_VC: Bénévole
                        BUT_amount_NB: 12000
                        BUT_used_budget_NB: 0
      operationId: get-communities-id-budget
      x-stoplight:
        id: xo4tsdnyh004d
      description: Récupère les informations budgétaires d'une communauté. La periode `period` est à préciser dans les paramètres GET de l'URL.
      parameters:
        - schema:
            type: number
          in: query
          name: period
          required: true
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    patch:
      summary: Modifier les informations budgétaire du groupe
      tags:
        - budget
      responses:
        '200':
          description: 'OK, renvoi `true` si les modifications on été appliquées'
      operationId: post-communities-id-budget
      x-stoplight:
        id: toaroc9k6rfzu
      description: Permet de faires des modifications sur le budget du groupe
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
        - schema:
            type: number
          in: query
          name: period
          description: La période (année)
          required: true
      requestBody:
        description: |-
          Le corps de la requête est composé d'un objet, avec les clé représentant les identifiants des thèmes à modifier et les valeurs correspondants au nouveau montant.
          - `0`: le budget général du groupe
          - `-1`: les frais fixes du groupe.
        content:
          application/json:
            schema:
              type: object
              properties:
                '0':
                  type: integer
                '1':
                  type: integer
                '2':
                  type: integer
                '-1':
                  type: integer
              x-examples:
                Example 1:
                  '0': 500000
                  '1': 134000
                  '2': 10000
                  '-1': 2400
            examples:
              Example 1:
                value:
                  '0': 500000
                  '1': 13000
                  '2': 21000
                  '-1': 2400
  /communities/managed:
    get:
      summary: La liste des communautés que l'utilisateur gère
      tags:
        - communities
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                x-examples:
                  Example 1:
                    - CMY_id_NB: 13
                      CMY_name_VC: Marché de Noël de Strasbourg
                      CMY_image_VC: 100010.png
                      CMY_emoji_VC: 1F389
                      CMY_color_VC: '#DE3D59'
                      CMY_description_TXT: null
                    - CMY_id_NB: 26
                      CMY_name_VC: Développement de VoteRight
                      CMY_image_VC: 100002.png
                      CMY_emoji_VC: 1F347
                      CMY_color_VC: '#8700CF'
                      CMY_description_TXT: |
                        Cette communauté est dédiée à la création d'outils numériques favorisant l'engagement citoyen et la participation active au processus démocratique. Nous travaillons ensemble à développer une application web innovante, permettant aux citoyens de s'impliquer dans les décisions publiques, de partager leurs idées et de participer à des consultations ouvertes. Notre projet vise à démocratiser l'accès à la gouvernance locale et nationale en facilitant les échanges entre citoyens, élus et acteurs institutionnels. Nous mettons en avant la transparence, l'inclusivité et l'égalité dans la participation politique à travers une plateforme simple et intuitive.
                items:
                  type: object
                  properties:
                    CMY_id_NB:
                      type: integer
                    CMY_name_VC:
                      type: string
                    CMY_image_VC:
                      type: string
                    CMY_emoji_VC:
                      type: string
                    CMY_color_VC:
                      type: string
                    CMY_description_TXT:
                      type: string
              examples:
                Example 1:
                  value:
                    - CMY_id_NB: 13
                      CMY_name_VC: Marché de Noël de Strasbourg
                      CMY_image_VC: 100010.png
                      CMY_emoji_VC: 1F389
                      CMY_color_VC: '#DE3D59'
                      CMY_description_TXT: La description
                    - CMY_id_NB: 26
                      CMY_name_VC: Développement de VoteRight
                      CMY_image_VC: 100002.png
                      CMY_emoji_VC: 1F347
                      CMY_color_VC: '#8700CF'
                      CMY_description_TXT: La description
      operationId: get-communities-managed
      x-stoplight:
        id: ujk30j08kcmpf
      description: 'Renvoie la liste des communautés gérées par l''utilisateur. (Celle dont il y a un role d''administateur, de modérateur, etc).'
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
        - schema:
            type: string
          in: query
          name: role
          description: Le type de role de l'utilisateur dans la communauté
  '/communities/{id}/exclude/{user}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
      - schema:
          type: string
        name: user
        in: path
        required: true
    post:
      summary: Exclure du groupe un membre
      tags:
        - members
      responses:
        '200':
          description: 'OK, renvoie `true` si le membre a été exclu.'
        '401':
          description: 'Unauthorized, l''exclusion a été bloquée.'
      operationId: post-communities-id-exclude-user
      x-stoplight:
        id: 5y2sn4la3rkfe
      description: ''
  '/communities/{id}/periods':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: La liste des périodes traitées par la communauté
      tags:
        - communities
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                x-examples:
                  Example 1:
                    - '2025'
                    - '2024'
              examples:
                Example 1:
                  value:
                    - '2025'
                    - '2024'
      operationId: get-communities-id-periods
      x-stoplight:
        id: 77meertdhf592
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  '/proposals/{id}/{round}/vote/valid':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
      - schema:
          type: string
        name: round
        in: path
        required: true
    post:
      summary: Valide le résultat d'un vote
      tags:
        - votes
        - proposals
      responses:
        '200':
          description: 'OK, le vote  été validé. Renvoie `true`.'
        '403':
          description: 'Forbidden, vous n''avez pas les droits pour valider le vote.'
      operationId: post-proposals-id-round-vote-valid
      x-stoplight:
        id: auwranvrfvauk
      description: Permet de valider ou refuser le résultat d'un vote.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        description: '`valid` est `true` si le vote est accepté, `false` sinon.'
        content:
          application/json:
            schema:
              type: object
              properties:
                valid:
                  type: boolean
              x-examples:
                Example 1:
                  valid: true
            examples:
              Example 1:
                value:
                  valid: true
  '/proposals/{id}/manage':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Indique si l'utilisateur a des droits de gestion
      tags:
        - proposals
        - roles
      responses:
        '200':
          description: 'OK, `true` si l''utilisateur à des droits, `false` sinon.'
      operationId: get-proposals-id-manage
      x-stoplight:
        id: 6v6cgnxm0oh5v
      description: Indique si l'utilisateur a des droits de gestion sur la proposition.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  '/proposals/{id}/approve':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    post:
      summary: Approuver une proposition
      tags:
        - proposals
      responses:
        '200':
          description: OK
        '403':
          description: 'Forbidden, vous n''avez pas les droits.'
      operationId: post-proposals-id-approve
      x-stoplight:
        id: x7vzoaaw1bf97
      description: Permet d'approuver une proposition.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        description: '`approve` est `true` si la proposition est approuvée, `false` sinon.'
        content:
          application/json:
            schema:
              type: object
              properties:
                approve:
                  type: boolean
                  x-stoplight:
                    id: 8ht8gpibx6ruv
  /reasons:
    get:
      summary: Les motifs de signalement
      tags:
        - reasons
      responses:
        '200':
          description: 'OK, la liste est renvoyée avec succès'
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    RES_id_NB:
                      type: integer
                    RES_label_VC:
                      type: string
                x-examples:
                  Example 1:
                    - RES_id_NB: 1
                      RES_label_VC: Motif 1
                    - RES_id_NB: 2
                      RES_label_VC: Motif 2
                    - RES_id_NB: 3
                      RES_label_VC: Motif 3
              examples:
                Example 1:
                  value:
                    - RES_id_NB: 1
                      RES_label_VC: Motif 1
                    - RES_id_NB: 2
                      RES_label_VC: Motif 2
                    - RES_id_NB: 3
                      RES_label_VC: Motif 3
      operationId: get-reasons
      x-stoplight:
        id: ahkgv9b9ov4hx
      description: Renvoie la liste des motifs de signalement.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  /roles:
    get:
      summary: La liste des rôles
      tags:
        - roles
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    ROL_id_NB:
                      type: integer
                    ROL_label_VC:
                      type: string
                x-examples:
                  Example 1:
                    - ROL_id_NB: 1
                      ROL_label_VC: Administrateur
                    - ROL_id_NB: 2
                      ROL_label_VC: Décideur
                    - ROL_id_NB: 3
                      ROL_label_VC: Assesseur
                    - ROL_id_NB: 4
                      ROL_label_VC: Modérateur
                    - ROL_id_NB: 5
                      ROL_label_VC: Membre
              examples:
                Example 1:
                  value:
                    - ROL_id_NB: 1
                      ROL_label_VC: Administrateur
                    - ROL_id_NB: 2
                      ROL_label_VC: Décideur
                    - ROL_id_NB: 3
                      ROL_label_VC: Assesseur
                    - ROL_id_NB: 4
                      ROL_label_VC: Modérateur
                    - ROL_id_NB: 5
                      ROL_label_VC: Membre
      operationId: get-roles
      x-stoplight:
        id: ah7deuo8pqrya
      description: 'Renvoie la liste des rôles. '
  /votes/systems:
    get:
      summary: La liste des modes de scrutin
      tags:
        - votes
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    SYS_id_NB:
                      type: integer
                    SYS_label_VC:
                      type: string
                    SYS_nb_rounds_NB:
                      type: integer
                x-examples:
                  Example 1:
                    - SYS_id_NB: 1
                      SYS_label_VC: Pour / Contre
                      SYS_nb_rounds_NB: 1
                    - SYS_id_NB: 2
                      SYS_label_VC: Oui / Non
                      SYS_nb_rounds_NB: 1
                    - SYS_id_NB: 3
                      SYS_label_VC: Scrutin majoritaire (un tour)
                      SYS_nb_rounds_NB: 1
                    - SYS_id_NB: 4
                      SYS_label_VC: Scrutin majoritaire (deux tours)
                      SYS_nb_rounds_NB: 2
                    - SYS_id_NB: 5
                      SYS_label_VC: Scrutin proportionnel
                      SYS_nb_rounds_NB: 1
              examples:
                Example 1:
                  value:
                    - SYS_id_NB: 1
                      SYS_label_VC: Pour / Contre
                      SYS_nb_rounds_NB: 1
                    - SYS_id_NB: 2
                      SYS_label_VC: Oui / Non
                      SYS_nb_rounds_NB: 1
                    - SYS_id_NB: 3
                      SYS_label_VC: Scrutin majoritaire (un tour)
                      SYS_nb_rounds_NB: 1
      operationId: get-votes-systems
      x-stoplight:
        id: xhsri844y6w7v
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  '/users/me/roles/{proposal}/proposal':
    get:
      summary: Le role de l'utilisateur dans la communauté associé à la proposition
      tags:
        - roles
      responses:
        '200':
          description: 'OK, un boolean `false` si le membre ne fait pas parti de la communauté, si le membre en fait parti un JSON comprenant les infos du role.'
          content:
            application/json:
              schema:
                type: object
                properties:
                  MEM_role_NB:
                    type: integer
                  ROL_label_VC:
                    type: string
                x-examples:
                  Example 1:
                    MEM_role_NB: 1
                    ROL_label_VC: Administrateur
              examples:
                Example 1:
                  value:
                    MEM_role_NB: 1
                    ROL_label_VC: Administrateur
      operationId: get-users-me-roles-proposal-proposal
      x-stoplight:
        id: 1b6fvafre5qxp
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
    parameters:
      - schema:
          type: string
        name: proposal
        in: path
        required: true
  /invitations:
    post:
      summary: Inviter des membres
      tags:
        - invitations
      responses:
        '200':
          description: 'OK, toutes les invitations ont été envoyées. Renvoie `true`.'
          headers:
            header-0:
              schema:
                type: string
        '206':
          description: |-
            Partial Content, certaines invitations n'ont pas été envoyées. 
            - `sent` : le nombre d'invitation envoyées
            - `expected` : le nombre de mail fournis
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  sent:
                    type: integer
                  expected:
                    type: integer
                x-examples:
                  Example 1:
                    message: Some invitations could not be sent
                    sent: 12
                    expected: 14
              examples:
                Example 1:
                  value:
                    message: Some invitations could not be sent
                    sent: 10
                    expected: 12
      operationId: post-invitations
      x-stoplight:
        id: tp3ufafk2uz2o
      description: Envoie des invitations.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                community:
                  type: string
                invitations:
                  type: array
                  items:
                    type: string
              x-examples:
                Example 1:
                  community: '13'
                  invitations:
                    - kylian.richard@gmail.co
            examples:
              Example 1:
                value:
                  community: '13'
                  invitations:
                    - hello@gmail.com
                    - usermail@mail.fr
        description: ''
  '/invitations/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: afficher l'invitation
      tags:
        - invitations
      responses:
        '200':
          description: L'invitation est renvoyée avec succès.
          content:
            application/json:
              schema:
                type: object
                properties:
                  INV_id_VC:
                    type: string
                  INV_recipient_NB:
                    type: integer
                  INV_community_NB:
                    type: integer
                  INV_sender_firstname_VC:
                    type: string
                  INV_sender_lastname_VC:
                    type: string
                  INV_joursDepuisInvitation_NB:
                    type: integer
                x-examples:
                  Example 1:
                    INV_id_VC: 0nRyc3ZXbG
                    INV_recipient_NB: 92
                    INV_community_NB: 9
                    INV_sender_firstname_VC: Isidora
                    INV_sender_lastname_VC: Lamberton
                    INV_joursDepuisInvitation_NB: 118
              examples:
                Example 1:
                  value:
                    INV_id_VC: 0nRyc3ZXbG
                    INV_recipient_NB: 92
                    INV_community_NB: 9
                    INV_sender_firstname_VC: Isidora
                    INV_sender_lastname_VC: Lamberton
                    INV_joursDepuisInvitation_NB: 118
      operationId: get-invitations-id
      x-stoplight:
        id: uun66r1ccrj8z
      description: "Renvoie les informations relatives à une invitation (le groupe, l'utilisateur qui invite, les thèmes).\r\n"
      parameters:
        - schema:
            type: string
          name: id
          in: path
          required: true
  '/invitations/{id}/accept':
    post:
      summary: accepter une invitation
      tags:
        - invitations
      responses:
        '200':
          description: 'OK, `true` si l''invitation à pu être acceptée, `false` sinon.'
      operationId: post-invitations-id-accept
      x-stoplight:
        id: x4pqty55x1eze
      description: Accepte l'invitation si le code entré par l'utilisateur est le bon.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                codeSend:
                  type: integer
              required:
                - codeSend
              x-examples:
                Example 1:
                  codeSend: 987102
            examples:
              Example 1:
                value:
                  codeSend: 987102
      parameters:
        - schema:
            type: string
          name: id
          in: path
          required: true
  '/invitations/{id}/reject':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    post:
      summary: refuser une invitation
      tags:
        - invitations
      responses:
        '200':
          description: 'OK, `true` si l''invitation à pu être refusée, `false` sinon.'
      operationId: get-invitations-id-reject
      x-stoplight:
        id: t0fza8gckqx74
      description: Refuse l'invitation si le code entré par l'utilisateur est le bon.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                codeSend:
                  type: integer
              required:
                - codeSend
              x-examples:
                Example 1:
                  codeSend: 432890
            examples:
              Example 1:
                value:
                  codeSend: 432890
      parameters:
        - schema:
            type: string
          name: id
          in: path
          required: true
  '/communities/{id}/update':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    post:
      summary: Mettre à jour une communauté
      tags:
        - communities
      responses:
        '200':
          description: 'OK, `true` si la communauté à pu être mise à jour'
      operationId: get-communities-id-update
      x-stoplight:
        id: 7vasxizai8cis
      description: Mets à jour une communauté avec les nouvelles entrées utilisateurs.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                color:
                  type: string
                emoji:
                  type: string
                image:
                  type: string
              required:
                - name
                - image
                - description
                - emoji
                - color
              x-examples:
                Example 1:
                  name: Club de baseBall
                  description: 'Organisation des activités, échange, partage'
                  color: '#5AB7EE'
                  emoji: 1F389
                  image: 100001.png
            examples:
              Example 1:
                value:
                  name: Club de baseBall
                  description: 'Organisation des activités, échange, partage'
                  color: '#5AB7EE'
                  emoji: 1F389
                  image: 100001.png
      parameters:
        - schema:
            type: integer
          name: id
          in: path
          required: true
  '/communities/{id}/reports':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: donner les signalements
      tags:
        - reports
        - communities
      responses:
        '200':
          description: Les signalements de la communauté sont renvoyés avec succès.
          content:
            application/json:
              schema:
                type: object
                properties:
                  RPT_comment_NB:
                    type: integer
                  RPT_user_NB:
                    type: integer
                  RPT_firstname_VC:
                    type: string
                  RPT_lastname_VC:
                    type: string
                  RPT_message_VC:
                    type: string
                  RPT_label_VC:
                    type: string
                x-examples:
                  Example 1:
                    RPT_comment_NB: 103
                    RPT_user_NB: 92
                    RPT_firstname_VC: Isidora
                    RPT_lastname_VC: Lamberton
                    RPT_message_VC: something bad
                    RPT_label_VC: Autre
              examples:
                Example 1:
                  value:
                    RPT_comment_NB: 103
                    RPT_user_NB: 92
                    RPT_firstname_VC: Isidora
                    RPT_lastname_VC: Lamberton
                    RPT_message_VC: something bad
                    RPT_label_VC: Autre
      operationId: get-communities-id-reports
      x-stoplight:
        id: su4dtdly1vzkj
      description: Donne tous les signalements "En Attente" d'un groupe.
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  '/reports/{user}/{comment}':
    parameters:
      - schema:
          type: string
        name: comment
        in: path
        required: true
      - schema:
          type: string
        name: user
        in: path
        required: true
    patch:
      summary: résoudre un signalement
      tags:
        - reports
      responses:
        '200':
          description: 'OK, `true` si le signalement a pu être modifié'
        '403':
          description: 'Forbidden, vous n''avez pas les droits de modération'
      operationId: patch-reports-id-community
      x-stoplight:
        id: mjoxormu97mo5
      description: Résout un signalement et/ou supprime le commentaire associé.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                delete:
                  type: boolean
              required:
                - delete
              x-examples:
                Example 1:
                  delete: true
            examples:
              Example 1:
                value:
                  delete: true
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  '/communities/{id}/proposals/formatted':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Récupérer la liste des propositions formatées pour les algorithmes
      tags:
        - proposals
      responses:
        '200':
          description: |-
            OK, la liste des propositions formatées. 

            Explications sur les différents éléments : 

            - `vote` : contient les informations relatives au vote, avec `system` correspondant au mode de scrutin, `positive` et `negative` : correspondent respectivement à la liste des utilisateurs (id) ayant exprimé leur satisfaction ou leur mécontentement envers la proposition.  

            - `reaction` : contient les listes des utilisateurs (id) ayant aimé `like` ou n'ayant pas aimé `dislike` la proposition.  
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    PRO_id_NB:
                      type: integer
                    PRO_title_VC:
                      type: string
                    PRO_budget_NB:
                      type: integer
                    PRO_theme_NB:
                      type: integer
                    vote:
                      type: object
                      properties:
                        system:
                          type: integer
                        positive:
                          type: array
                          items:
                            type: integer
                        negative:
                          type: array
                          items:
                            type: object
                            properties: {}
                    reaction:
                      type: object
                      properties:
                        like:
                          type: array
                          items:
                            type: integer
                        dislike:
                          type: array
                          items:
                            type: integer
                x-examples:
                  Example 1:
                    - PRO_id_NB: 1
                      PRO_title_VC: Proposition 1
                      PRO_budget_NB: 2240
                      PRO_theme_NB: 1
                      vote:
                        system: 4
                        positive: []
                        negative: []
                      reaction:
                        like:
                          - 14
                          - 16
                          - 10
                          - 3
                        dislike:
                          - 7
                          - 15
                          - 12
                          - 6
                    - PRO_id_NB: 2
                      PRO_title_VC: Proposition 2
                      PRO_budget_NB: 14761
                      PRO_theme_NB: 3
                      vote:
                        system: 4
                        positive: []
                        negative: []
                      reaction:
                        like:
                          - 1
                          - 14
                          - 12
                        dislike:
                          - 18
                    - PRO_id_NB: 3
                      PRO_title_VC: Proposition 3
                      PRO_budget_NB: 28835
                      PRO_theme_NB: 4
                      vote:
                        system: 1
                        positive:
                          - 6
                          - 4
                          - 8
                          - 15
                          - 5
                        negative: []
                      reaction:
                        like:
                          - 13
                          - 1
                          - 8
                        dislike:
                          - 3
                          - 6
                          - 10
                          - 20
                          - 16
              examples:
                Example 1:
                  value:
                    - PRO_id_NB: 1
                      PRO_title_VC: Proposition 1
                      PRO_budget_NB: 2240
                      PRO_theme_NB: 1
                      vote:
                        system: 4
                        positive: []
                        negative: []
                      reaction:
                        like:
                          - 14
                          - 5
                          - 3
                        dislike:
                          - 7
                          - 11
                          - 2
                          - 15
                          - 12
                          - 6
                    - PRO_id_NB: 2
                      PRO_title_VC: Proposition 2
                      PRO_budget_NB: 14761
                      PRO_theme_NB: 3
                      vote:
                        system: 4
                        positive: []
                        negative: []
                      reaction:
                        like:
                          - 1
                          - 14
                          - 9
                          - 8
                        dislike:
                          - 18
                    - PRO_id_NB: 3
                      PRO_title_VC: Proposition 3
                      PRO_budget_NB: 28835
                      PRO_theme_NB: 4
                      vote:
                        system: 1
                        positive:
                          - 6
                          - 4
                          - 8
                          - 15
                          - 9
                          - 12
                          - 7
                        negative: []
                      reaction:
                        like:
                          - 13
                          - 1
                          - 18
                        dislike:
                          - 3
                          - 6
      operationId: get-communities-id-proposals-formatted
      x-stoplight:
        id: alzp1ypwaau14
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
        - schema:
            type: string
          in: query
          name: period
          description: La période des propositions
          required: true
  /auth/logout:
    post:
      summary: Déconnecter un utilisateur
      tags:
        - authentification
      responses:
        '200':
          description: 'OK, un boolean `true` si la déconnexion a réussi'
      operationId: post-auth-logout
      x-stoplight:
        id: c603t1hl7y5qx
      parameters:
        - schema:
            type: string
          in: cookie
          name: PHPSESSID
          description: Le cookie d'authentification
          required: true
  /code/verification:
    post:
      summary: Genère un code de vérification pour la création d'un compte
      tags:
        - code
      responses:
        '200':
          description: 'OK, renvoie `true` si le code a été envoyé.'
        '409':
          description: 'Conflict, le mail a déjà été utilise'
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
                x-examples:
                  Example 1:
                    Error: email already used
              examples:
                Example 1:
                  value:
                    Error: email already used
      operationId: post-code-verification
      x-stoplight:
        id: 739hn1vxrt7ym
      description: Genère un code à 6 chiffre pour valider l'adresse email d'un nouvel utilisateur. Envoie le code par email.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  x-stoplight:
                    id: c4irik04pfbz0
components:
  securitySchemes: {}
  responses: {}
x-internal: true
tags:
  - name: authentification
  - name: users
  - name: communities
  - name: themes
  - name: proposals
  - name: comments
  - name: reactions
  - name: members
  - name: invitations
  - name: budget
  - name: votes
  - name: roles
  - name: reasons
  - name: reports
